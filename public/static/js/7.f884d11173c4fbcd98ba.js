webpackJsonp([7],{105:function(t,i,s){s(199);var e=s(11)(s(156),s(230),null,null);t.exports=e.exports},156:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s(12);i.default={name:"doctorlist",data:function(){return{navs:["科室","在线咨询","面对面问诊"],title:1==this.$route.params.type?"门诊预约":2==this.$route.params.type?"在线咨询":"视频问医",type:this.$route.params.type,hospital_set:0,city_set:0,chooseCity:"北京",feeLT:"",feeGT:"",clinicid:0,date:"",photoSUrl:"",hospitals:[],prices_set:0,prices:[{id:0,price:"不限",feeGT:"",feeLT:""},{id:1,price:"100-199",feeGT:100,feeLT:199},{id:2,price:"200-299",feeGT:200,feeLT:299},{id:3,price:"300-399",feeGT:300,feeLT:399},{id:4,price:"400+",feeGT:400,feeLT:1e4}],cities:[{id:1,city:"北京"},{id:3,city:"其他"}],price:0,recommend:0,department_set:0,section_id:0,cityId:0,mark:0,perPage:0,department:[],times:[],keyword:"",page:1,lists:[],feeGTall:[],feeLTall:[],cinnique:[],clinicPrice:[],dateTime:this.$store.state.searchDate,swiper:"",name:"",statusOrder:!0,titles:{},titleName:"",is_search:0}},filters:{ceshi:function(t){console.log(t);var i="";return t.length>2?(t.forEach(function(t){i+=t.name+"  "}),i.trim()+"..."):t.length>0&&t.length<=2?(t.forEach(function(t){i+=t.name+"  "}),i.trim()+"..."):void 0},netMoney:function(t){return parseInt(t.net_money)?"￥"+parseInt(t.net_money):"免费"},clinicMoney:function(t){return parseInt(t.clinic_money)?"￥"+parseInt(t.clinic_money):"免费"},has_name:function(t){if(t)return t.name},return_title:function(t){switch(t){case 1:return"主任医师";case 2:return"副主任医师";case 3:return"主治医师";case 4:return"知名专家";case 5:return"特聘专家";case 6:return"名老中医"}}},mounted:function(){this.getList();var t=this;setTimeout(function(){t.swiper=new Swiper(".swiper-container-list",{direction:"vertical",slidesPerView:"auto",observer:!0,observeParents:!0,mousewheelControl:!0,freeMode:!0,freeModeMomentumRatio:.4,freeModeMomentumVelocityRatio:.2,resistanceRatio:.7,preventLinksPropagation:!0,preventClicksPropagation:!0,preventClicks:!0,onTouchEnd:function(i){var s=i.height,e=i.virtualSize;i.translate<=s-e-50&&i.translate<0&&t.statusOrder&&($(".visible").html("正在加载..."),t.getList())}})},400)},created:function(){this.disease=this.$route.query.disease,this.getSection(),this.getClinique(),this.getTitles(),this.$store.commit("setincludePage","doctorlist"),2==this.$route.params.type?this.navs=["科室","在线咨询","面对面问诊"]:3==this.$route.params.type&&(this.navs=["科室","视频问医","面对面问诊"])},activated:function(){this.swiper&&this.swiper.setWrapperTranslate(this.$store.state.translate)},beforeRouteLeave:function(t,i,s){console.log(t),t.fullPath.length<i.fullPath.length&&this.$store.commit("setincludePage",""),s()},events:{update:function(){this.page=1,this.lists=[],this.getList()}},watch:{dateTime:function(){this.page=1,this.recommend=0,this.lists=[],this.getList()},clinicid:function(t){t>0&&(this.page=1,this.recommend=0,this.lists=[],this.getList())}},methods:{ceshi:function(){var t=navigator.userAgent,i=t.indexOf("Android")>-1||t.indexOf("Adr")>-1,s=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),e=/micromessenger/i.test(navigator.userAgent);i?e?(this.isWeixin=1,$("body").css("overflow","hidden")):window.location.href="":s&&(window.location.href="https://itunes.apple.com/cn/app/%E6%B3%B0%E5%92%8C%E5%9B%BD%E5%8C%BB/id1353271770?mt=8")},canceldel:function(){$(".layer_pop").addClass("none")},dodel:function(){$(".layer_pop").addClass("none"),this.$router.push({path:"/my_fmld/my"})},enter:function(t){"13"==t.keyCode&&($(".searchInp").blur(),this.search())},backTo:function(){$(".cityBox").addClass("none")},city:function(){$(".cityBox").removeClass("none")},loadMore:function(){this.statusOrder&&this.getList()},getList:function(){var t=this,i="";i=1==this.$route.params.type?"clinic":3==this.$route.params.type?"video":"web",this.$http({url:this.$store.state.apiUrl+"doctor/lists?include=diseases",method:"GET",params:{page:this.page,type:i,sections_id:this.section_id,fees:this.clinicPrice,title:this.titleName,name:this.keyword,clinique:this.clinicid,schedule:this.dateTime}}).then(function(i){this.nextList(i.data.data,t)},function(t){s.i(e.b)(t.data.data.errors)})},nextList:function(t,i){var i=this;if(!t.count&&this.keyword)return $(".no").removeClass("none"),$(".visible").html(""),!1;var s=$(".orderBOX").find(".visible");t.list.forEach(function(t){i.lists.push(t)}),t.list.length>0&&i.page++,i.page>t.totalPage?(s.html("没有更多数据了"),i.statusOrder=!1):(i.statusOrder=!0,s.show(),s.html("点击加载")),setTimeout(function(){i.swiper.update(),i.show()},400),t.count||0!=i.recommend||(i.recommend=1,i.getList()),i.total=t.perPage},getSection:function(){this.$http({url:this.$store.state.apiUrl+"section/lists",method:"GET"}).then(function(t){console.log(t),this.department=t.data.data,this.department.unshift({id:0,name:"不限"})},function(t){s.i(e.b)(t.data.data.errors)})},getClinique:function(){this.$http({url:this.$store.state.apiUrl+"clinique/lists",method:"GET",params:{city:this.chooseCity}}).then(function(t){this.hospitals=t.data.data},function(t){s.i(e.b)(t.data.data.errors)})},setClinicid:function(t,i){this.hospital_set=t,this.clinicid=i,this.navClose()},show:function(){this.disease&&0==this.recommend&&$(".yes").removeClass("none"),0==this.recommend?$(".no").addClass("none"):1==this.recommend&&this.lists.length>0&&($(".no").removeClass("none"),$(".yes").addClass("none"))},setCity:function(t,i,s){this.city_set=t,this.cityId=i,this.chooseCity=s,$(".cityBox").addClass("none"),this.getClinique()},setPrice:function(t){t>0?($(".prices").eq(0).removeClass("active"),$(".prices").eq(t).hasClass("active")?($(".prices").eq(t).removeClass("active"),this.clinicPrice.remove(this.prices[t].price)):($(".prices").eq(t).addClass("active"),this.clinicPrice.push(this.prices[t].price))):($(".prices").eq(0).addClass("active"),$(".prices").eq(0).siblings().removeClass("active"),this.clinicPrice=[]),console.log(this.clinicPrice),this.page=1,this.recommend=0,this.lists=[],this.swiper.setWrapperTranslate(0),this.getList(),this.navClose()},setDepartment:function(t,i){this.section_id=i,$(".department").eq(t).removeClass("active"),console.log(this.section_id),this.recommend=0,this.page=1,this.lists=[],this.swiper.setWrapperTranslate(0),this.getList(),this.navClose()},navTog:function(t){3!=t||$(".top_nav li").eq(3).hasClass("active")?$(".calendar").removeClass("active"):$(".calendar").addClass("active"),$(".top_nav li").eq(t).toggleClass("active").siblings().removeClass("active")},navClose:function(){$(".calendar").removeClass("active"),$(".top_nav li").removeClass("active")},order:function(t,i){this.$store.commit("setTranslate",this.swiper.translate);var s=this;this.$http.get(this.$store.state.apiUrl+"user/complete").then(function(e){console.log(e),1==e.data.status?1==s.$route.params.type?1==i?s.$router.push({path:"/doctor/outline",query:{id:t,clinicId:s.clinicid,type:s.type}}):s.$router.push({path:"/doctor_detail",query:{id:t,clinicId:s.clinicid,type:s.type}}):i?s.$router.push({path:"/doctor_detail",query:{id:t,clinicId:s.clinicid,type:s.type}}):s.$http.get(s.$store.state.apiUrl+"bespeak/can/"+t).then(function(i){i.data.status?s.$router.push({path:"/doctor/preOnline",query:{id:t,type:s.type}}):$api.pop(i.data.msg)}):$(".layer_pop").removeClass("none")})},bg:function(t){if(t)return"background-image:url("+t+")"},cT:function(t){switch(t){case 1:return"已完成";case 2:return"不在线";case 3:return"商城";case 4:return"推荐"}},map:function(t){if(this.$store.state.tcmuser){var i=t;api.openApp({iosUrl:i,androidPkg:"android.intent.action.VIEW",mimeType:"text/html",uri:i},function(t,i){})}else location.href=t},linkSearch:function(){this.$router.push({path:"/search",query:{type:this.type}})},back:function(){window.history.back(-1)},getTitles:function(){this.$http.get(this.$store.state.apiUrl+"doctor/title").then(function(t){this.titles=t.data.data},function(t){s.i(e.b)(t.data.data.errors)})},setTitle:function(t,i){this.titleName=i,this.page=1,this.recommend=0,this.lists=[],this.swiper.setWrapperTranslate(0),this.getList(),this.navClose()},search:function(){if(!this.keyword)return $api.pop("请输入 医生 / 症状 / 疾病"),!1;this.is_search=1,this.page=1,this.lists=[],this.getList(),this.navClose()},det:function(t){this.$store.commit("setTranslate",this.swiper.translate),this.$router.push({path:"/doctor_detail",query:{id:t,clinicId:this.clinicid,type:this.type}})}}}},197:function(t,i,s){i=t.exports=s(95)(),i.push([t.i,".search_box{z-index:9}.top_nav{z-index:5}.wrap{z-index:1}",""])},199:function(t,i,s){var e=s(197);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);s(96)("fcc26c9a",e,!0)},230:function(t,i){t.exports={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"fixbody"},[s("form",{staticClass:"search_bar",attrs:{action:"",onsubmit:"$api.pop($('#so').val())"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{id:"so",type:"search"},domProps:{value:t.name},on:{input:function(i){i.target.composing||(t.name=i.target.value)}}}),s("span",{attrs:{onclick:"$('.search_bar').hide()"}},[t._v("取消")])]),s("header",{attrs:{onclick:"$('.calendar,.top_nav li').removeClass('active');"}},[s("div",{staticClass:"left",on:{click:function(i){t.back()}}},[s("i",{staticClass:"icon-arrow-left"})]),s("div",{staticClass:"center"},[s("span",[t._v(t._s(t.title))])])]),s("div",{staticClass:"cityBox none"},[s("header",[s("div",{staticClass:"left",on:{click:function(i){t.backTo()}}},[s("i",{staticClass:"icon-arrow-left"})])]),s("ul",t._l(t.cities,function(i,e){return s("li",{class:e==t.city_set?"active":"",on:{click:function(s){t.setCity(e,i.yid,i.city)}}},[t._v(t._s(i.city)),s("i",{staticClass:"icon-check"})])}))]),s("form",{staticClass:"search_box",attrs:{action:"javascript:return true;"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"searchInp",attrs:{type:"search",placeholder:"搜索医生 / 疾病"},domProps:{value:t.keyword},on:{keydown:function(i){if(!("button"in i)&&t._k(i.keyCode,"enter",13,i.key,"Enter"))return null;t.enter(i)},input:function(i){i.target.composing||(t.keyword=i.target.value)}}}),s("i",{staticClass:"icon-search",on:{click:function(i){t.search()}}})]),t.disease?t._e():s("div",{staticClass:"top_nav"},[1==t.$route.params.type?s("ul",[s("li",[s("div",{staticClass:"tog_btn",on:{click:function(i){t.navTog(0)}}},[s("span",[t._v("门诊部")]),s("i",{staticClass:"icon-arrow-down"})]),s("div",{staticClass:"drop"},[s("div",{staticClass:"bg",on:{click:function(i){t.navClose()}}}),s("div",{staticClass:"box"},t._l(t.hospitals,function(i,e){return s("div",{staticClass:"hosp_li",class:e==t.hospital_set?"active":"",on:{click:function(s){t.setClinicid(e,i.id)}}},[0==i.id?s("h3",[t._v(t._s(i.city))]):[s("h3",[t._v(t._s(i.name)+"医院")]),s("h3",[t._v(t._s(i.address)+t._s(i.content.address))]),s("h3",[t._v(t._s(i.content.telephone))]),s("i",{staticClass:"icon-check-c"}),s("span",{staticClass:"addr_a"})]],2)}))])]),s("li",[s("div",{staticClass:"tog_btn",on:{click:function(i){t.navTog(1)}}},[s("span",[t._v("科室")]),s("i",{staticClass:"icon-arrow-down"})]),s("div",{staticClass:"drop"},[s("div",{staticClass:"bg",on:{click:function(i){t.navClose()}}}),t.department?s("div",{staticClass:"box clearfix box_hg"},t._l(t.department,function(i,e){return s("div",{staticClass:"department",class:{active:t.section_id==i.id},on:{click:function(s){t.setDepartment(e,i.id)}}},[t._v(" "+t._s(i.name))])})):t._e()])]),s("li",[s("div",{staticClass:"tog_btn",on:{click:function(i){t.navTog(2)}}},[s("span",[t._v("挂号")]),s("i",{staticClass:"icon-arrow-down"})]),s("div",{staticClass:"drop"},[s("div",{staticClass:"bg",on:{click:function(i){t.navClose()}}}),t.titles?s("div",{staticClass:"box clearfix box_hg"},t._l(t.titles,function(i,e){return s("div",{staticClass:"department",class:{active:i&&i.id==t.titleName},on:{click:function(s){t.setTitle(e,i.id)}}},[t._v(" "+t._s(t._f("has_name")(i)))])})):t._e()])]),s("li",[s("div",{staticClass:"tog_btn",on:{click:function(i){t.navTog(3)}}},[s("span",[t._v("日期")]),s("i",{staticClass:"icon-arrow-down"})]),s("div",{staticClass:"drop"},[s("div",{staticClass:"bg",on:{click:function(i){t.navClose()}}})])])]):t._e(),1!=t.$route.params.type?s("ul",{staticClass:"col3"},t._l(t.navs,function(i,e){return 2!=e||2==e&&!t.$store.state.tcmuser?s("li",[s("div",{staticClass:"tog_btn",on:{click:function(i){t.navTog(e)}}},[s("span",[t._v(t._s(i))]),s("i",{staticClass:"icon-arrow-down"})]),s("div",{staticClass:"drop"},[s("div",{staticClass:"bg",on:{click:function(i){t.navClose()}}},[0==e?s("div",{staticClass:"box clearfix box_hg"},t._l(t.department,function(i,e){return s("div",{staticClass:"department",class:{active:t.section_id==i.id},on:{click:function(s){t.setDepartment(e,i.id)}}},[t._v(" "+t._s(i.name))])})):1==e?s("div",{staticClass:"box clearfix box_hg"},t._l(t.prices,function(i,e){return s("div",{staticClass:"prices",class:{active:0==e},on:{click:function(s){t.setPrice(e,i.price)}}},[t._v(t._s(i.price))])})):2==e?s("div",{staticClass:"box clearfix box_hg",on:{click:t.ceshi}},[s("p",{staticClass:"wr"},[t._v("非常抱歉，面对面问诊目前只在APP端进行")]),s("p",{staticClass:"ck"},[t._v("点击前往下载泰和国医APP >")]),s("p",{staticClass:"face"})]):t._e()])])]):t._e()})):t._e()]),s("div",{attrs:{id:"wrap"}},[s("div",{staticClass:"swiper-container swiper-container-list"},[s("div",{staticClass:"orderBOX swiper-wrapper"},[s("div",{staticClass:"swiper-slide"},[s("div",{staticClass:"panel"},[s("h4",{staticClass:"tit_illness no none"},[t._v("没有找到您要找的医师")]),s("h4",{staticClass:"tit_illness yes none"},[t._v("以下是治疗"),s("span",[t._v(t._s(t.disease))]),t._v("的医师")]),t._l(t.lists,function(i){return s("div",{staticClass:"doctor_list"},[i?s("div",{staticClass:"link",on:{click:function(s){t.det(i.id)}}},[i.photoSUrl?s("div",{staticClass:"avatar",style:t.bg(i.photoSUrl)}):s("div",{staticClass:"avatar",style:t.bg("/img/doctor_default.png")}),s("h3",[s("span",[t._v(t._s(i.name))]),s("sub",[t._v(t._s(t._f("return_title")(i.title)))])]),s("p",{staticClass:"labBox"},[t._v("擅长："),s("span",[t._v(t._s(t._f("ceshi")(i.diseases.data)))])]),s("h6",[s("span",[t._v("患者推荐指数：")]),s("div",{staticClass:"stars",attrs:{show:i.level}},[s("i",{staticClass:"icon-nav1"}),s("i",{staticClass:"icon-nav1"}),s("i",{staticClass:"icon-nav1"}),s("i",{staticClass:"icon-nav1"}),s("i",{staticClass:"icon-nav1"})])])]):t._e(),1==t.type?s("div",{staticClass:"btn btn-jv",on:{click:function(s){t.order(i.id,i.isSchedules)}}},[t._v("预约")]):t._e(),1!=t.type?s("div",{staticClass:"btn btn-jv",on:{click:function(s){t.order(i.id,i.rest)}}},[t._v(t._s(2==t.type?"在线咨询":"视频问医"))]):t._e()])})],2),s("div",{staticClass:"visible",on:{click:t.loadMore}})])])])]),s("div",{staticClass:"layer_pop none"},[s("div",{staticClass:"content"},[s("div",{staticClass:"txt"},[t._v("请先去完善信息！")]),s("div",{staticClass:"pop_btn clearfix"},[s("div",{staticClass:"p_btn l",on:{click:function(i){t.dodel()}}},[t._v("确定")]),s("div",{staticClass:"p_btn",on:{click:function(i){t.canceldel()}}},[t._v("取消")])])])])])},staticRenderFns:[]}}});