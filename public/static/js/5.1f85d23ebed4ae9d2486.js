webpackJsonp([5],{100:function(t,e,a){var i=a(11)(a(151),a(246),null,null);t.exports=i.exports},142:function(t,e,a){t.exports={default:a(144),__esModule:!0}},143:function(t,e,a){"use strict";e.__esModule=!0;var i=a(142),s=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e,a){return e in t?(0,s.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},144:function(t,e,a){a(145);var i=a(4).Object;t.exports=function(t,e,a){return i.defineProperty(t,e,a)}},145:function(t,e,a){var i=a(32);i(i.S+i.F*!a(5),"Object",{defineProperty:a(33).f})},151:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(143),s=a.n(i);e.default={data:function(){return s()({titType:1,timeType:0,todayDate:"",startDate:"",endDate:"",option:{},healthData:[],myChart:{},dataResult:{},dayData:{},weekData:{},monthData:{},custom_data:{},week:[],month:[],custom_date:[],systolic:[],diastolic:[],heart_rate:[],sugar_before:[],sugar_after:[],oxygen:[],temp:[],BMI:[],legend:[],dataType:[],eChartsData:[],y:{},end:0,color:["#42b689","#c75757","#80c98a"],dataTypeName:[["收缩压","舒张压","心率"],["餐前","餐后"],["血氧"],["体温"],["BMI"]]},"option",{backgroundColor:"#fff",tooltip:{trigger:"item"},legend:{data:[]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",min:0,max:24,interval:3,axisLabel:{show:!0,textStyle:{color:"#80c98a"}},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!0}},yAxis:{type:"value",min:0,max:300,interval:50,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{textStyle:{color:"#80c98a"}}},series:[]})},created:function(){this.$route.params.startDate?(this.startDate=this.$route.params.startDate,this.endDate=this.$route.params.endDate):this.startDate=this.endDate=this.today=(new Date).toLocaleDateString().replace(/\//g,"-"),this.titType=this.$route.params.titType||1,console.log(this.$route.params.titType),this.timeType=this.$route.params.timeType||0},mounted:function(){this.createEchart()},methods:{back:function(){this.$router.push("/index")},dateDIY:function(t){function e(t){for(var e=[],a=t-5;a<=t+5;a++)e.push({id:a+"",value:a+""});return e}function a(){for(var t=[],e=1;e<=12;e++)t.push({id:e+"",value:e+""});return t}function i(t){for(var e=[],a=1;a<=t;a++)e.push({id:a+"",value:a+""});return e}var s=this,o=($(t),$(t)),n=new Date,h=n.getFullYear(),r=n.getMonth()+1,l=n.getDate();o.attr("data-year",h),o.attr("data-month",r),o.attr("data-date",l);var c=function(t){t(e(h))},d=function(t,e){e(a())},p=function(t,e,a){if(/^(1|3|5|7|8|10|12)$/.test(e))a(i(31));else if(/^(4|6|9|11)$/.test(e))a(i(30));else{if(!/^2$/.test(e))throw new Error("month is illegal");a(i(t%4==0&&t%100!=0||t%400==0?29:28))}},y=o.attr("data-year"),m=o.attr("data-month"),u=o.attr("data-date");new IosSelect(3,[c,d,p],{title:"日期选择",itemHeight:35,oneLevelId:y,twoLevelId:m,threeLevelId:u,showLoading:!0,callback:function(e,a,i){o.attr("data-year",e.id),o.attr("data-month",a.id),o.attr("data-date",i.id),o.html(e.value+"-"+a.value+"-"+i.value),".start"==t?s.startDate=e.value+"-"+a.value+"-"+i.value:".end"==t&&(s.endDate=e.value+"-"+a.value+"-"+i.value)}})},dodel:function(){$(".layer_pop").addClass("none"),$(".start").html(this.today),$(".end").html(this.today)},getDIYData:function(){this.dataType=[],this.eChartsData=[],this.legend=[],this.changeY(),this.$http.get(this.$store.state.apiUrl+"health/data/"+this.titType,{params:{startDate:this.startDate,endDate:this.endDate}}).then(function(t){if(console.log(t),t.data.status){this.custom_data=t.data.data.custom_data;for(var e in this.custom_data)"used_days"!=e&&"height"!=e&&"weight"!=e&&this.dataType.push(e);for(var e=0;e<this.dataTypeName[this.titType-1].length;e++){var a={type:"scatter",symbolSize:16,symbol:"circle",itemStyle:{normal:{color:"",borderColor:"#b0e1ce",borderWidth:2}}};a.name=this.dataTypeName[this.titType-1][e],a.data=this.custom_data[this.dataType[e]][1],a.itemStyle.normal.color=this.color[e],this.custom_date=this.custom_data[this.dataType[e]][0],this.eChartsData.push(a),this.legend.push(a.name)}this.custom_date.length<8?this.end=100:this.custom_date.length>7&&this.custom_date.length<15?this.end=40:this.custom_date.length>15&&this.custom_date.length<30?this.end=20:this.custom_date.length>31&&(this.end=10)}else $api.pop(t.data.msg);this.myChart.setOption({tooltip:{trigger:"item",formatter:function(t){return"时间 :  "+t.name+"号</br>"+t.seriesName+" :  "+t.data}},dataZoom:[{type:"inside",start:0,end:this.end,xAxisIndex:[0]}],xAxis:{type:"category",data:this.custom_date,boundaryGap:!0,interval:1,show:!0,axisLabel:{textStyle:{color:"#80c98a"}},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!0}},yAxis:this.y,legend:{data:this.legend},series:this.eChartsData})})},createEchart:function(){var t=this;setTimeout(function(){t.myChart=echarts.init(document.getElementById("chart")),t.myChart.setOption(t.option)}),3==this.timeType?this.getDIYData():this.getHealthData()},getHealthData:function(){this.$http.get(this.$store.state.apiUrl+"health/data/"+this.titType).then(function(t){console.log(t),this.dataResult=t,this.dayData=t.data.data.day_data,this.weekData=t.data.data.week_data,this.monthData=t.data.data.month_data,this.setHealthData()})},setHealthData:function(){if(this.dataType=[],this.eChartsData=[],this.legend=[],this.changeY(),0==this.timeType){for(var t in this.dayData)"used_days"!=t&&"height"!=t&&"weight"!=t&&this.dataType.push(t);for(var e=0;e<this.dataTypeName[this.titType-1].length;e++){var a={type:"scatter",symbolSize:16,symbol:"circle",itemStyle:{normal:{color:"",borderColor:"#b0e1ce",borderWidth:2}}};a.name=this.dataTypeName[this.titType-1][e],a.data=this.dayData[this.dataType[e]],a.itemStyle.normal.color=this.color[e],this.eChartsData.push(a),this.legend.push(a.name)}this.myChart.setOption({tooltip:{trigger:"item",formatter:function(t){console.log(t);var e=t.data[0]+"";if(e.indexOf(".")>-1){var a=6*e.split(".")[1];e=a<10?e.split(".")[0]+":0"+a:e.split(".")[0]+":"+a}else{var a=":00";e+=a}return"时间 :  "+e+"</br>"+t.seriesName+" :  "+t.data[1]}},dataZoom:[{type:"inside",start:0,end:100,xAxisIndex:[0]}],xAxis:{type:"value",min:0,max:24,interval:3,axisLabel:{show:!0,textStyle:{color:"#80c98a"}},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!0}},legend:{data:this.legend},yAxis:this.y,series:this.eChartsData})}else if(1==this.timeType){for(var t in this.weekData)"used_days"!=t&&"height"!=t&&"weight"!=t&&this.dataType.push(t);for(var e=0;e<this.dataTypeName[this.titType-1].length;e++){var a={type:"scatter",symbolSize:16,symbol:"circle",itemStyle:{normal:{color:"",borderColor:"#b0e1ce",borderWidth:2,lineStyle:{color:"#e0e0e0",width:3}}}};a.name=this.dataTypeName[this.titType-1][e],a.data=this.weekData[this.dataType[e]][1],a.itemStyle.normal.color=this.color[e],this.week=this.weekData[this.dataType[e]][0],this.eChartsData.push(a),this.legend.push(a.name)}this.myChart.setOption({tooltip:{trigger:"item",formatter:function(t){return"时间 :  "+t.name+"号</br>"+t.seriesName+" :  "+t.data}},dataZoom:[{type:"inside",start:0,end:100,xAxisIndex:[0]}],xAxis:{type:"category",data:this.week,boundaryGap:!0,interval:1,show:!0,axisLabel:{textStyle:{color:"#80c98a"}},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!0}},legend:{data:this.legend},yAxis:this.y,series:this.eChartsData})}else if(2==this.timeType){for(var t in this.monthData)"used_days"!=t&&"height"!=t&&"weight"!=t&&this.dataType.push(t);for(var e=0;e<this.dataTypeName[this.titType-1].length;e++){var a={type:"scatter",symbolSize:16,symbol:"circle",itemStyle:{normal:{color:"",borderColor:"#b0e1ce",borderWidth:2,lineStyle:{color:"#e0e0e0",width:3}}}};a.name=this.dataTypeName[this.titType-1][e],a.data=this.monthData[this.dataType[e]][1],a.itemStyle.normal.color=this.color[e],this.month=this.monthData[this.dataType[e]][0],this.eChartsData.push(a),this.legend.push(a.name),console.log(this.eChartsData)}this.myChart.setOption({tooltip:{trigger:"item",formatter:function(t){return"时间 :  "+t.name+"号</br>"+t.seriesName+" :  "+t.data}},dataZoom:[{type:"inside",start:0,end:20,xAxisIndex:[0]}],xAxis:{type:"category",data:this.month,boundaryGap:!0,interval:1,show:!0,axisLabel:{textStyle:{color:"#80c98a"}},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!0}},legend:{data:this.legend},yAxis:this.y,series:this.eChartsData})}},lr:function(t,e){this.$router.push({path:"/data_lr",query:{type:t,titType:e-1}})},qh:function(){3==this.timeType?this.$router.push({name:"图标切换",params:{titType:this.titType,timeType:this.timeType,startDate:this.startDate,endDate:this.endDate}}):this.$router.push({name:"图标切换",params:{titType:this.titType,timeType:this.timeType}})},changeY:function(){1==this.titType?this.y={type:"value",min:0,max:300,interval:50,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{textStyle:{color:"#80c98a"}}}:2==this.titType?this.y={type:"value",min:0,max:14,interval:2,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{textStyle:{color:"#80c98a"},formatter:function(t,e){return t>0?t.toFixed(1):0}}}:3==this.titType?this.y={type:"value",min:40,max:160,interval:20,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{textStyle:{color:"#80c98a"}}}:4==this.titType?this.y={type:"value",min:36,max:41,interval:1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{textStyle:{color:"#80c98a"}}}:5==this.titType&&(this.y={type:"value",min:18,max:30,interval:2,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{textStyle:{color:"#80c98a"}}})},checkTit:function(t){if(this.titType=t+1,this.changeY(),console.log(this.timeType),3!=this.timeType)this.createEchart();else{var e=this;setTimeout(function(){e.myChart=echarts.init(document.getElementById("chart")),e.myChart.setOption(e.option)}),this.myChart.setOption({yAxis:this.y}),this.getDIYData()}},checkTime:function(t){this.timeType=t,3!=this.timeType&&this.createEchart()}}}},246:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fixbody"},[a("header",[a("div",{staticClass:"left",on:{click:t.back}},[a("i",{staticClass:"icon-arrow-left"})]),a("div",{staticClass:"center"},[t._v("健康数据")]),a("div",{staticClass:"right",on:{click:function(e){t.qh()}}},[t._v("图表切换")])]),a("div",{attrs:{id:"wrap"}},[a("div",{staticClass:"tab_nv"},[a("p",{class:[1==t.titType?"active":""],on:{click:function(e){t.checkTit(0)}}},[a("span",[t._v("血压")])]),a("p",{class:[2==t.titType?"active":""],on:{click:function(e){t.checkTit(1)}}},[a("span",[t._v("血糖")])]),a("p",{class:[3==t.titType?"active":""],on:{click:function(e){t.checkTit(2)}}},[a("span",[t._v("血氧")])]),a("p",{class:[4==t.titType?"active":""],on:{click:function(e){t.checkTit(3)}}},[a("span",[t._v("体温")])]),a("p",{class:[5==t.titType?"active":""],on:{click:function(e){t.checkTit(4)}}},[a("span",[t._v("体质")])])]),a("div",{staticClass:"date"},[3==t.timeType?a("div",{staticClass:"timebox"},[a("p",{staticClass:"start",on:{click:function(e){t.dateDIY(".start")}}},[t._v(t._s(t.startDate))]),a("p",{staticClass:"end",on:{click:function(e){t.dateDIY(".end")}}},[t._v(t._s(t.endDate))]),a("div",{staticClass:"icon-arrow-right-b"})]):t._e(),a("div",{staticClass:"select",on:{click:t.getDIYData}},[t._v("查  询")])]),a("div",{attrs:{id:"chart"}}),a("div",{staticClass:"lr_btn"},[0==t.timeType?a("span",{on:{click:function(e){t.lr(0,t.titType)}}},[t._v("录入数据")]):a("span",{on:{click:function(e){t.lr(1,t.titType)}}},[t._v("数据补录")])]),a("div",{staticClass:"tabs"},[a("p",{class:[0==t.timeType?"active":""],on:{click:function(e){t.checkTime(0)}}},[t._v("今天")]),a("p",{class:[1==t.timeType?"active":""],on:{click:function(e){t.checkTime(1)}}},[t._v("近一周")]),a("p",{class:[2==t.timeType?"active":""],on:{click:function(e){t.checkTime(2)}}},[t._v("近一月")]),a("p",{class:[3==t.timeType?"active":""],on:{click:function(e){t.checkTime(3)}}},[t._v("自定义范围")])])]),a("div",{staticClass:"layer_pop none"},[a("div",{staticClass:"content"},[a("div",{staticClass:"txt"}),a("div",{staticClass:"pop_btn clearfix"},[a("div",{staticClass:"p_btn l",staticStyle:{width:"100%"},on:{click:function(e){t.dodel()}}},[t._v("确定")])])])])])},staticRenderFns:[]}}});