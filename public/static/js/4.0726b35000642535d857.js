webpackJsonp([4],{109:function(t,s,e){var a=e(11)(e(160),e(205),null,null);t.exports=a.exports},143:function(t,s,e){t.exports={default:e(145),__esModule:!0}},144:function(t,s,e){"use strict";s.__esModule=!0;var a=e(143),i=function(t){return t&&t.__esModule?t:{default:t}}(a);s.default=function(t,s,e){return s in t?(0,i.default)(t,s,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[s]=e,t}},145:function(t,s,e){e(146);var a=e(4).Object;t.exports=function(t,s,e){return a.defineProperty(t,s,e)}},146:function(t,s,e){var a=e(33);a(a.S+a.F*!e(5),"Object",{defineProperty:e(34).f})},160:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a,i=e(144),n=e.n(i),o=e(32),c=e.n(o),r=e(12);s.default={data:function(){return{patient_set:0,patient:[{id:"",name:"",sex:"",age:""}],prices_set:0,prices:["100-199","200-299","300-399","400+"],prices_id:0,bespeak_id:0,disease:"",symptom:"",long:0,tag:0,info:[],user:{},doctor:{},fuzhen:0,is_patient:0,type:1,photo:[],u:"",isAndroid:"",oldHeight:document.body.clientHeight,screenHeight:document.body.clientHeight,images:0,result:[],nothing:1,data:{},ceshi:["肿瘤疾病","外科疾病","肾科疾病","眼科疾病","消化疾病","呼吸疾病","儿科疾病"]}},mounted:function(){var t=this;window.onresize=function(){return function(){window.screenHeight=document.body.clientHeight,t.screenHeight=window.screenHeight}()},this.phone()},created:function(){this.id=this.$route.query.id},filters:{return_title:function(t){switch(t){case 1:return"主任医师";case 2:return"副主任医师";case 3:return"主治医师";case 4:return"知名专家";case 5:return"特聘专家";case 6:return"名老中医"}}},watch:{screenHeight:function(t){this.screenHeight==this.oldHeight?$(".yes_no").css({display:"block"}):$(".yes_no").css({display:"none"})},bespeak_id:function(t){t>0&&this.get_bespeak()}},methods:(a={inptfocus:function(t){1==t?$(".showInput").focus():2==t&&$(".textVal").focus()},search:function(){$(".result").css("display","block"),this.result=[];for(var t=0;t<this.ceshi.length;t++)if(this.nothing=1,this.disease){for(var s=this.disease.split(""),e=0;e<s.length;e++)if(-1==this.ceshi[t].indexOf(s[e])){this.nothing=0;break}this.nothing&&this.result.push(this.ceshi[t])}console.log(this.result),this.disease&&this.result.length<1&&this.result.push("未查询到结果")},resultHide:function(){$(".result").css("display","none")},chooseitem:function(t){"未查询到结果"!=t&&(this.disease=t,setTimeout(function(){$(".result").css("display","none")},1))},phone:function(){this.u=navigator.userAgent,console.log(this.u),this.isAndroid=this.u.indexOf("Android")>-1||this.u.indexOf("Adr")>-1},rise:function(){this.isAndroid&&$(".yes_no").css({display:"none"})},drop:function(){this.isAndroid&&$(".yes_no").css({display:"block"})},bg:function(t){if(t)return"background-image:url("+t+")"},queding:function(){$(".layer_pop").addClass("none")},cancel:function(t){this.photo.splice(t,1),--this.images<5&&$(".addimage").css("display","inline-block")},appUpload:function(t,s){var e=this;AppUpload(function(a){a&&a.status?(e.photo.splice(t,1,a.data.image_url),4==e.images&&$(".addimage").css("display","none"),"box addimage"!=s.target.className&&"icon-camera"!=s.target.className&&"SPAN"!=s.target.tagName||e.images++):$api.pop("上传失败")})},wxUpload:function(t,s){if(("box addimage"==s.target.className||"icon-camera"==s.target.className||"SPAN"==s.target.tagName)&&this.images>4)return $(".layer_pop").removeClass("none"),!1;if(this.$store.state.tcmuser)return void this.appUpload(t,s);if(!this.$store.state.wxready)return void $api.pop("微信上传未就绪，稍等");var e=this;wx.ready(function(){wx.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(a){var i=a.localIds;wx.uploadImage({localId:i[0],isShowProgressTips:1,success:function(a){var i=a.serverId;e.wxUploadId(i,t,s)},fail:function(t){alert(c()(t))}})},fail:function(t){alert("选图失败"+t.errMsg+",请重试"),setTimeout(function(){window.location.reload()},200)}})})},wxUploadId:function(t,s,e){var a=this;$("body").addClass("loading"),this.$http.post(this.$store.state.apiUrl+"wxupload",{serverId:t}).then(function(t){$("body").removeClass("loading");var i=t.data;i.status?(a.photo.splice(s,1,i.data),4==a.images&&$(".addimage").css("display","none"),"box addimage"!=e.target.className&&"icon-camera"!=e.target.className&&"SPAN"!=e.target.tagName||a.images++):($api.pop("上传失败"),setTimeout(function(){window.location.reload()},200))})},fz:function(t,s){"patient"==t?this.is_patient=s:"type"==t&&(this.type=s)},setPat:function(t,s){this.patient_set=t,this.patient_id=s},sure:function(){if(this.data.redundant_first=this.type,this.data.redundant_in=this.is_patient,this.data.doctor_id=this.id,this.data.disease=this.disease,this.data.desc=this.symptom,this.data.local_type=this.$route.query.type,this.type){if(!this.data.disease)return $api.pop("疾病不能为空"),!1;if(!this.data.desc)return $api.pop("疾病描述不能为空"),!1}else this.data.disease=this.photo;this.submit()},dodel:function(){this.submit()},canceldel:function(){},submit:function(){this.tag||this.$http.post(this.$store.state.apiUrl+"bespeak/web",this.data).then(function(t,s){this.tag=1,1==t.data.status?(this.bespeak_id=t.data.data.bespeak_id,$(".popop").fadeIn()):$api.pop(t.data.msg)},function(t){e.i(r.b)(t.data.data.errors)})},know:function(){$(".popop").fadeOut(),this.$router.push({path:"/order"})},navTog:function(t){3!=t||$(".top_nav li").eq(3).hasClass("active")?$(".calendar").removeClass("active"):$(".calendar").addClass("active"),$(".top_nav li").eq(t).toggleClass("active").siblings().removeClass("active")},navClose:function(){$(".calendar").removeClass("active"),$(".top_nav li").removeClass("active")},det:function(t){this.$router.push({path:"/doctor_det/id",query:{id:t}})},order:function(){}},n()(a,"bg",function(t){if(t)return"background-image:url("+t+")"}),n()(a,"cT",function(t){switch(t){case 1:return"已完成";case 2:return"不在线";case 3:return"商城";case 4:return"推荐"}}),n()(a,"add",function(){this.$router.push({path:"/my_myfml/my"})}),n()(a,"get_bespeak",function(){this.$http.get(this.$store.state.apiUrl+"bespeak/detail/"+this.bespeak_id+"?include=doctor,user").then(function(t){this.info=t.data.data,t.data.data.doctor&&(this.doctor=t.data.data.doctor.data,this.doctor.photoSUrl||(this.doctor.photoSUrl="/img/doctor_default.png")),t.data.data.user&&(this.user=t.data.data.user.data)})}),n()(a,"chooseDisease",function(t){var s=this;$(t).blur();var e=[{id:"110000",value:"肿瘤科",parentId:"0"},{id:"120000",value:"外科",parentId:"0"},{id:"130000",value:"肾内科",parentId:"0"},{id:"140000",value:"眼科",parentId:"0"},{id:"150000",value:"消化科",parentId:"0"},{id:"160000",value:"呼吸科",parentId:"0"},{id:"170000",value:"儿科",parentId:"0"}],a=[{id:"110100",value:"肿瘤疾病",parentId:"110000"},{id:"120100",value:"外科疾病",parentId:"120000"},{id:"130100",value:"肾科疾病",parentId:"130000"},{id:"140100",value:"眼科疾病",parentId:"140000"},{id:"150100",value:"消化疾病",parentId:"150000"},{id:"160100",value:"呼吸疾病",parentId:"160000"},{id:"170100",value:"儿科疾病",parentId:"170000"}],i=document.querySelector(t),n=(document.querySelector(t),i.dataset.one_id),o=(i.dataset.one_value,i.dataset.two_id);i.dataset.two_value,new IosSelect(2,[e,a],{container:"body",title:"疾病名",itemHeight:40,itemShowCount:3,relation:[1,1],oneLevelId:n,twoLevelId:o,callback:function(t,e){s.disease=e.value,$(".showInput").val(e.value)}})}),a)}},205:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"fixbody"},[e("header",[t._m(0),e("div",{staticClass:"center"},[t._v(t._s(3==t.$route.query.type?"视频问医":"在线咨询")+"预约")])]),e("div",{staticClass:"btn btn-fix",on:{click:t.sure}},[t._v("提交")]),e("div",{staticClass:"pop",attrs:{id:"patSet"}},[e("div",{staticClass:"box"},[e("div",{staticClass:"head dz"},[e("span",[t._v("选择就诊人")]),e("a",{on:{click:function(s){t.add()}}},[t._v("就诊人管理")])]),e("div",{staticClass:"main"},[e("ul",t._l(t.patient,function(s,a){return e("li",{class:t.patient_set==a?"active":"",on:{click:function(e){t.setPat(a,s.id)}}},[e("h4",[t._v(t._s(s.realName))]),e("p",[t._v(t._s(s.sex)+"，"+t._s(s.age)+"岁")]),e("i",{staticClass:"icon-check-c"})])}))]),e("div",{staticClass:"foot",attrs:{onclick:"$('#patSet').fadeOut()"}},[t._v("确定")])])]),e("div",{staticClass:"doctor_order",attrs:{id:"wrap"}},[e("div",{staticClass:"yes_no"},[e("div",{staticClass:"one"},[e("span",{staticClass:"t"},[t._v("泰和国医患者")]),e("div",{staticClass:"box"},[e("span",{class:{active:1==t.is_patient},on:{click:function(s){t.fz("patient",1)}}},[t._v("是")]),e("span",{class:{active:0==t.is_patient},on:{click:function(s){t.fz("patient",0)}}},[t._v("否")])])]),e("div",{staticClass:"one"},[e("span",{staticClass:"t"},[t._v("诊断类型")]),e("div",{staticClass:"box"},[e("span",{class:{active:1==t.type},on:{click:function(s){t.fz("type",1)}}},[t._v("咨询")]),e("span",{staticClass:"fz",class:{active:0==t.type},on:{click:function(s){t.fz("type",0)}}},[t._v("复诊")])])])]),1==t.type?e("ul",{staticClass:"list-group"},[e("li",[e("span",{staticClass:"changesize"},[t._v("疾病")]),e("div",{staticClass:"val",on:{click:function(s){t.inptfocus(1)}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.disease,expression:"disease"}],staticClass:"showInput",attrs:{type:"text",placeholder:"请输入疾病名称"},domProps:{value:t.disease},on:{focus:t.rise,blur:t.resultHide,input:function(s){s.target.composing||(t.disease=s.target.value)}}})])])]):t._e(),e("div",{staticClass:"panel"},[e("h3",[t._v("症状描述（"+t._s(t.symptom.length)+"/300）")]),e("div",{staticClass:"txt",on:{click:function(s){t.inptfocus(2)}}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.symptom,expression:"symptom"}],staticClass:"textVal",attrs:{placeholder:"详细描述您的病情，治疗经过，症状以及想要得到的帮助，泰和国医将确保您的隐私安全。"},domProps:{value:t.symptom},on:{focus:t.rise,input:function(s){s.target.composing||(t.symptom=s.target.value)}}})])]),0==t.type?e("div",{staticClass:"panel"},[e("h3",[t._v("症例")]),e("div",{staticClass:"txt"},[e("p",[t._v("为方便医生更好的诊断，请上传初诊病历，建议上传舌象、面相等与病情相关的图片")]),e("div",{staticClass:"imgBox"},[t._l(t.photo,function(s,a){return e("div",{staticClass:"showimage"},[e("i",{staticClass:"cancel",on:{click:function(s){t.cancel(a)}}}),e("div",{staticClass:"img",style:"background-image:url("+s+");background-size:100% 100%;",attrs:{id:"photo"+a},on:{click:function(s){t.wxUpload(a,s)}}})])}),e("div",{staticClass:"box addimage",on:{click:function(s){t.wxUpload(t.images,s)}}},[e("i",{staticClass:"icon-camera"}),e("span",[t._v("添加照片")])])],2)])]):t._e()]),e("div",{staticClass:"popop"},[e("div",{staticClass:"box"},[e("div",{staticClass:"main"},[e("ul",[e("li",{staticClass:"name_tit"},[e("span",{staticClass:"span_c"},[t._v(t._s(t.user.realname))]),2==t.user.sex?e("span",[t._v("女士：")]):t._e(),1==t.user.sex?e("span",[t._v("先生：")]):t._e()]),e("li",[t._v(t._s(t.doctor.name)+"医生将在30分钟内回复，请耐心等待。如果"+t._s(t.doctor.name)+"医生无法接诊，医生助理将为您提供服务。")]),e("li",{staticClass:"ys_nr clearfix"},[e("div",{staticClass:"left"},[e("img",{attrs:{src:t.doctor.photoSUrl}}),e("div",{staticClass:"dBox"},[e("span",{staticClass:"name"},[t._v(t._s(t.doctor.name))]),e("span",[t._v(t._s(t._f("return_title")(t.doctor.title)))])])]),e("div",{staticClass:"right"},[e("span",{staticClass:"zf"},[t._v(t._s(3==t.$route.query.type?"视频":"咨询")+"费：")]),e("span",{staticClass:"price"},[t._v("￥"+t._s(3==t.$route.query.type?t.doctor.video_amount:t.doctor.web_amount))])])])])]),e("div",{staticClass:"foot",on:{click:function(s){t.know()}}},[t._v("知道了")])])]),e("div",{staticClass:"layer_pop none"},[e("div",{staticClass:"content"},[e("div",{staticClass:"txt"},[t._v("最多只能上传五张照片")]),e("div",{staticClass:"pop_btn clearfix"},[e("div",{staticClass:"p_btn l",staticStyle:{width:"100%"},on:{click:function(s){t.queding()}}},[t._v("确定")])])])])])},staticRenderFns:[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"left",attrs:{onclick:"back()"}},[e("i",{staticClass:"icon-arrow-left"})])}]}}});