webpackJsonp([24],{124:function(t,a,i){var s=i(11)(i(179),i(222),null,null);t.exports=s.exports},179:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={data:function(){return{info:{},doctor:{},clinique:{},order:{},id:2,again_type:"subscribe",total:0,inquiry:{},message:{},user:{}}},created:function(){this.id=this.$route.query.id,this.getDetail()},filters:{},methods:{chat:function(t,a){this.$router.push({path:"/chat",query:{listId:t,doctorName:a}})},bg:function(t){if(t)return"background-image:url("+t+")"},confirm_order:function(t){var a=this;this.$http.get(this.$store.state.apiUrl+"order/bespeak/"+t).then(function(i){$api.pop(i.data.msg),1==i.data.status&&(a.$store.state.tcmuser?a.$router.push({path:"/payment",query:{bespeak_id:t}}):window.location.href="/wechat/payment/?bespeak_id="+t)})},getDetail:function(){this.$http.get(this.$store.state.apiUrl+"bespeak/detail/"+this.id+"?include=doctor,clinique,order,inquiry,user,message").then(function(t){this.info=t.data.data,t.data.data.doctor&&(this.doctor=t.data.data.doctor.data,this.doctor.photoSUrl||(this.doctor.photoSUrl="/img/doctor_default.png")),t.data.data.clinique&&(this.clinique=t.data.data.clinique.data),t.data.data.order&&(this.order=t.data.data.order.data,this.total=t.data.data.order.data.payable_amount),t.data.data.inquiry&&(this.inquiry=t.data.data.inquiry.data),t.data.data.user&&(this.user=t.data.data.user.data),t.data.data.message&&(this.message=t.data.data.message.data)})},totalPrice:function(t){this.total=t.order.data.payable_amount},paymethodClinic:function(t,a,i){this.$router.push({path:"/payment",query:{id:t,type:a,clinic_money:i}})},paymethod:function(t,a,i){if(3!=t)return $api.pop("请等待医生接诊后支付"),!1;this.$router.push({path:"/payment",query:{id:a,type:i,clinic_money:clinic_money}})},ask:function(t,a){this.$router.push({path:"/chat",query:{clinicId:t,doctorName:a}})},again:function(t,a,i,s){this.$http({url:this.$store.state.apiUrl+"clinic/again",method:"GET",params:{id:t,type:this.again_type}}).then(function(t){t.data.status?this.$router.push({path:"/payment",query:{id:a,type:i,clinic_money:s}}):$api.pop(t.data.msg)})},delDeal:function(t){$(".layer_pop").removeClass("none"),this.delid=t},canceldel:function(){$(".layer_pop").addClass("none")},dodel:function(){var t=this,a=this.delid;a&&t.$http.get(t.$store.state.apiUrl+"bespeak/close/"+a).then(function(a){1==a.data.status?t.getDetail():$api.pop(a.data.msg)}),$(".layer_pop").addClass("none"),this.getDetail()},online:function(){this.$router.push({path:"/doctor/preOnline",query:{id:this.id,type:this.type}})},getComment:function(){this.$router.push({path:"/doctor/allComment"})}}}},222:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{attrs:{id:"wrap"}},[i("header",[i("router-link",{staticClass:"left",attrs:{to:"/order",tag:"a"}},[i("i",{staticClass:"icon-arrow-left"})]),i("div",{staticClass:"center"},[t._v("我的预约")])],1),0==t.info.type?[t.info.status<15?i("div",{staticClass:"btn btn-fix"},[i("div",{staticClass:"left"},[i("span",{on:{click:function(a){t.delDeal(t.info.id)}}},[t._v("取消预约")])]),10==t.info.status?i("div",{staticClass:"right buy",on:{click:function(a){t.confirm_order(t.info.id)}}},[t._v("立即支付")]):i("div",{staticClass:"right buy"},[t._v("等待接诊")])]):t._e(),15==t.info.status?i("div",{staticClass:"btn btn-fix",on:{click:function(a){t.chat(t.message.id,t.doctor.name)}}},[t._v("进入聊天")]):t._e()]:[t.info.status<15?i("div",{staticClass:"btn btn-fix"},[i("div",{staticClass:"left"},[i("span",{on:{click:function(a){t.delDeal(t.info.id)}}},[t._v("取消预约")])]),i("div",{staticClass:"right buy",on:{click:function(a){t.confirm_order(t.info.id)}}},[t._v("立即支付")])]):t._e()],i("div",{staticClass:"order_doctor"},[i("img",{attrs:{src:t.doctor.photoSUrl}}),i("p",[t._v(t._s(t.doctor.name)),i("span",[t._v(t._s(t.doctor.titleName))])])]),1==t.info.type?i("ul",{staticClass:"list-group"},[i("li",[i("span",[t._v("预约时间")]),i("div",{staticClass:"val"},[t._v(t._s(t.info.start_time))])]),t._m(0),t.order.payable_amount?i("li",[i("span",[t._v("支付")]),i("div",{staticClass:"val"},[t._v("总计："),i("span",{staticClass:"x_price"},[t._v(t._s(t.total))])])]):t._e(),t.info.status<10?i("li",[i("span",[t._v("待支付")])]):t._e(),35==t.info.status?i("li",[i("span",[t._v("预约已取消")])]):t._e()]):i("ul",{staticClass:"list-group"},[i("li",[i("span",[t._v("就诊人")]),i("div",{staticClass:"val"},[t._v(t._s(t.user.realname))])]),1==t.info.redundant_first?i("li",[i("span",[t._v("病名")]),i("div",{staticClass:"val"},[t._v(t._s(t.inquiry.disease))])]):t._e(),i("li",[i("span",[t._v("病情描述")]),i("div",{staticClass:"des"},[t._v(t._s(t.inquiry.desc))])]),0==t.info.redundant_first?i("li"):t._e(),0==t.info.redundant_first?i("li",[i("span",[t._v("症例")]),i("div",{staticClass:"zhengli"},t._l(t.info.disease,function(t){return i("div",{staticClass:"zhenglipic"},[i("div",{staticClass:"img",style:"background-image:url("+t+");background-size:100% 100%;"})])}))]):t._e(),10==t.info.status&&t.order.payable_amount?i("li",[i("span",[t._v("需支付")]),i("div",{staticClass:"val"},[t._v("总计："),i("span",{staticClass:"x_price"},[t._v(t._s(t.order.payable_amount))])])]):t._e(),t.info.status<10?i("li",[i("span",[t._v("待支付")])]):t._e(),35==t.info.status?i("li",[i("span",[t._v("预约已取消")])]):t._e()]),1==t.info.type&&t.info.status<15?i("div",{staticClass:"tips"},[t._m(1),i("span",[t._v("请在")]),i("span",{staticClass:"cor"},[t._v("15分钟")]),i("span",[t._v("内完成支付，超时则自动取消预约。")])]):t._e(),i("div",{staticClass:"layer_pop none"},[i("div",{staticClass:"content"},[i("div",{staticClass:"txt"},[t._v("您确定将该预约取消？")]),i("div",{staticClass:"pop_btn clearfix"},[i("div",{staticClass:"p_btn l",on:{click:function(a){t.dodel()}}},[t._v("确定")]),i("div",{staticClass:"p_btn",on:{click:function(a){t.canceldel()}}},[t._v("取消")])])])])],2)},staticRenderFns:[function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("li",[i("span",[t._v("就诊医院")]),i("div",{staticClass:"val"},[t._v("泰和国医")])])},function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"icon-tit"},[i("i")])}]}}});