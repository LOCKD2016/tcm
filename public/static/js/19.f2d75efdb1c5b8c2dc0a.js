webpackJsonp([19],{129:function(t,s,a){var e=a(11)(a(184),a(216),null,null);t.exports=e.exports},184:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={data:function(){return{recipe_head:[],order:{prescription:{tisane:0},status:0},goods:[],is_tisane:0,is_express:0,password:"",tag:0,order_id:0,ceshi:0}},created:function(){this.order_id=this.$route.query.order_id,this.getOrder(this.order_id)},watch:{order_id:function(t){t>0&&this.getOrder(t)}},mounted:function(){},methods:{goOrder:function(){this.$router.push({path:"/my_order/my"})},getOrder:function(t){this.$http.get(this.$store.state.apiUrl+"order/detail/"+t).then(function(t){if(!t.data.data)return $api.pop("订单信息缺失"),!1;this.order=t.data.data},function(t){errorMsg(t.data.data.errors)})},pay:function(){if(!this.$store.state.wxready&&!this.$store.state.tcmuser)return $api.pop("微信API准备未就绪，请稍后再试"),!1;var t=this;0==this.tag&&(this.tag=1,$(".topay").html("订单处理中..."),this.$http.get(this.$store.state.apiUrl+"pay/wechat/"+this.order_id).then(function(s){$api.pop(s.data.msg),s.data.status&&(this.$store.state.tcmuser?app.chooseWXPay(s.data.data,function(s,a){a?-2==a.code?$api.pop("支付取消"):$api.pop("支付失败"):s&&s.status?(t.order.status=5,$api.pop("支付成功")):$api.pop("支付失败")}):wx.chooseWXPay({timestamp:s.data.data.timestamp,nonceStr:s.data.data.nonceStr,package:s.data.data.package,signType:s.data.data.signType,paySign:s.data.data.paySign,success:function(s){"chooseWXPay:ok"==s.errMsg&&(t.order.status=5,$api.pop("支付成功"))},fail:function(t){$api.pop("无法调起微信支付"+t.errMsg),$(".topay").html(t.errMsg),setTimeout(function(){location.reload()},400)},cancel:function(t){$api.pop("支付取消")}})),setTimeout(function(){t.tag=0},200),$(".topay").html("支付")}))},bind:function(){$(".layer_pop").removeClass("none"),this.tag=0},card:function(){this.$router.push({path:"/my_card"})},balance:function(){this.$router.push({path:"/my_card_balance"})},canceldel:function(){$(".layer_pop").addClass("none"),this.tag=0}}}},216:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"fixbody"},[a("div",{staticClass:"cfpy_noprice p_myorder_details",attrs:{id:"wrap"}},[a("header",[t._m(0),a("div",{staticClass:"center"},[t._v("确认订单")]),0==t.order.status||2==t.order.status?a("div",{staticClass:"btn btn-fix"},[a("div",{staticClass:"left"},[a("span",[t._v("总计：")]),a("b",[t._v("￥"+t._s(t.order.amount))])]),a("div",{staticClass:"right topay buy",class:{buy:!t.$store.state.wxready&&!t.$store.state.tcmuser},on:{click:function(s){t.pay()}}},[t._v("立即支付")])]):t._e(),0==t.order.status||2==t.order.status?a("ul",{staticClass:"list-group search_his"},[t._m(1)]):t._e()]),5==t.order.status&&1==t.order.prescription.express?a("div",{staticClass:"istisane"},[a("div",{staticClass:"tipsbg"}),a("div",{staticClass:"tipsword"},[a("p",[t._v("您的药品将在24小时完成配送！")]),a("p",{staticClass:"yesok",on:{click:t.goOrder}},[t._v("我知道了")])])]):t._e(),5==t.order.status&&0==t.order.prescription.express?a("div",{staticClass:"notisane"},[a("div",{staticClass:"tipsbg"}),a("div",{staticClass:"tipsword"},[a("p",{staticClass:"left"},[t._v("请您在24h~48h之内到泰和国医门诊取药")]),a("p",{staticClass:"left"},[t._v("泰和国医工作时间为 : 9:00-18:00")]),a("p",{staticClass:"left"},[t._v("联系方式 : 010-64176667 / 64178887")]),a("p",{staticClass:"yesok",on:{click:t.goOrder}},[t._v("我知道了")])])]):t._e()])])},staticRenderFns:[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"left",attrs:{onclick:"back()"}},[a("i",{staticClass:"icon-arrow-left"})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",[a("span",[t._v("支付方式")]),a("div",{staticClass:"val"},[t._v("微信支付")])])}]}}});