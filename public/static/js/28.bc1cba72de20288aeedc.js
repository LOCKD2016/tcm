webpackJsonp([28],{118:function(t,i,e){var s=e(11)(e(171),e(238),null,null);t.exports=s.exports},171:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e(12);i.default={data:function(){return{user_name:"",mobile:"",address:"",province:null,city:null,district:null,id:0,route:"",medicineid:0}},created:function(){void 0!==this.$route.query.id&&(this.id=this.$route.query.id,this.getAddr(this.id))},methods:{confirm:function(){var t=/^[1][3,4,5,6,7,8][0-9]{9}$/;return this.user_name?this.mobile?t.test(this.mobile)?this.province&&this.city?this.address?(this.medicineid=this.$route.query.medicineid,this.tisane=this.$route.query.tisane,this.$route.path.indexOf("myinfo")>-1?this.route="/my_address/my":this.route="/prescription/my/id?id="+this.medicineid+"&express=1&tisane="+this.tisane,console.log(this.route),void this.save()):($api.pop("详细地址不能为空"),!1):($api.pop("省份不能为空"),!1):($api.pop("手机号码格式不正确"),!1):($api.pop("手机号不能为空"),!1):($api.pop("姓名不许为空"),!1)},save:function(){if(""==this.city)var t=this.province;else var t=this.city;this.id>0?this.$http({url:this.$store.state.apiUrl+"address/edit/"+this.id,method:"PUT",params:{user_name:this.user_name,mobile:this.mobile,province:this.province,city:t,district:this.district,address:this.address,is_default:0}}).then(function(t){t.data.status&&this.$router.back()},function(t){e.i(s.b)(t.data.data.errors)}):this.$http({url:this.$store.state.apiUrl+"address/save",method:"POST",params:{user_name:this.user_name,mobile:this.mobile,province:this.province,city:t,district:this.district,address:this.address,is_default:0}}).then(function(t){t.data.status&&this.$router.push({path:this.route})},function(t){e.i(s.b)(t.data.data.errors)})},getAddr:function(t){t&&this.$http.get(this.$store.state.apiUrl+"address/detail/"+t).then(function(t){this.user_name=t.data.data.user_name,this.mobile=t.data.data.mobile,this.address=t.data.data.address,this.province=t.data.data.province,this.city=t.data.data.city,this.district=t.data.data.district})},setAddr:function(t,i){var e=this;$("input").blur();var s=$(t).attr("data-province-code"),a=$(t).attr("data-city-code"),r=$(t).attr("data-district-code");new IosSelect(3,[iosProvinces,iosCitys,iosCountys],{title:"地址选择",itemHeight:40,relation:[1,1,0,0],oneLevelId:s,twoLevelId:a,threeLevelId:r,callback:function(s,a,r){$(t).attr("data-province-code",s.id).attr("data-city-code",a.id).attr("data-district-code",r.id),e.province=s.value;var d=a.value;e.city=d,e.district=r.value,i&&i([s.id,a.id,r.id])}})}}}},238:function(t,i){t.exports={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"fixbody"},[e("header",[t._m(0),e("div",{staticClass:"center"},[t._v("填写收货地址")]),e("div",{staticClass:"right",on:{click:function(i){t.confirm()}}},[t._v("保存")])]),e("div",{attrs:{id:"wrap"}},[e("ul",{staticClass:"list-group"},[e("li",[e("span",[t._v("收货人")]),e("div",{staticClass:"val"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.user_name,expression:"user_name"}],attrs:{type:"text",maxlength:"6",placeholder:"请输入收货人"},domProps:{value:t.user_name},on:{input:function(i){i.target.composing||(t.user_name=i.target.value)}}})]),e("i",{staticClass:"icon-arrow-right"})]),e("li",[e("span",[t._v("联系电话")]),e("div",{staticClass:"val"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.mobile,expression:"mobile"}],attrs:{type:"tel",maxlength:"11",placeholder:"请输入手机号"},domProps:{value:t.mobile},on:{input:function(i){i.target.composing||(t.mobile=i.target.value)}}})]),e("i",{staticClass:"icon-arrow-right"})]),e("li",{on:{click:function(i){t.setAddr("#city")}}},[e("span",[t._v("所在地区")]),e("div",{staticClass:"val",attrs:{id:"city"}},[t._v(t._s(t.province)+" "+t._s(t.city)+" "+t._s(t.district))]),e("i",{staticClass:"icon-arrow-right"})]),e("li",[e("span",[t._v("街道")]),e("div",{staticClass:"val"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],attrs:{type:"text",maxlength:"30",placeholder:"详细地址"},domProps:{value:t.address},on:{input:function(i){i.target.composing||(t.address=i.target.value)}}})]),e("i",{staticClass:"icon-arrow-right"})])])])])},staticRenderFns:[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"left",attrs:{onclick:"back()"}},[e("i",{staticClass:"icon-arrow-left"})])}]}}});